Current schema for ECQ: table ec_curves with extra table

Search table columns (* indicates "used for searching Nov 2020"):

*'label'
*'lmfdb_label'
*'iso'
*'lmfdb_iso'
 'iso_nlabel'
*'number'
 'lmfdb_number'
*'ainvs'
*'jinv'
*'conductor'
*'torsion'
*'rank'
*'sha'
*'torsion_structure'
*'cm'
*'isogeny_degrees'
*'nonmax_primes'
 'nonmax_rad'
 'trace_hash'
*'bad_primes'
 'class_size'
 'num_bad_primes'
*'semistable'
 'optimality'
 'manin_constant'
*'num_int_pts'
*'regulator'
*'isodeg'
 'torsion_growth'

Extra table columns:

 'equation'
 'signD'
 'torsion_generators'
 'xcoord_integral_points'
 'gens'
 'heights'
 'tamagawa_product'
 'special_value'
 'real_period'
 'degree'
 'modp_images'
 '2adic_label'
 '2adic_index'
 '2adic_log_level'
 '2adic_gens'
 'isogeny_matrix'
 'class_deg'
 'sha_an'
 'sha_primes'
 'torsion_primes'
 'tor_degs'
 'tor_fields'
 'tor_gro'
 'local_data'
 'min_quad_twist'
 'aplist'
 'anlist'
 'iwdata'
 'iwp0'

Proposed replacement with 8 tables, the first of which will be the
main search table.

ec_curvedata
ec_localdata
ec_classdata
ec_mwbsd
ec_galrep
ec_2adic
ec_torsion_growth
ec_iwasawa

schemas:

ec_curvedata: one row per curve, contains all columns used in search

'label': 'text',
'lmfdb_label': 'text',
'iso': 'text',
'lmfdb_iso': 'text',
'iso_nlabel': 'smallint',
'number': 'smallint',
'lmfdb_number': 'smallint',
'ainvs': 'numeric[]',
'jinv': 'numeric[]',
'conductor': 'integer',
'cm': 'smallint',
'isogeny_degrees': 'smallint[]',
'nonmax_primes': 'smallint[]',
'nonmax_rad': 'integer',
'bad_primes': 'integer[]',
'num_bad_primes': 'smallint',
'semistable': 'boolean',
'potential_good_reduction': 'boolean',
'optimality': 'smallint',
'manin_constant': 'smallint',
'num_int_pts': 'integer',
'torsion': 'smallint',
'torsion_structure': 'smallint[]',
'torsion_primes': 'smallint[]',
'rank': 'smallint',
'analytic_rank': 'smallint',
'sha': 'integer',
'sha_primes': 'smallint[]',
'regulator': 'numeric',
'signD': 'smallint',
'degree': 'bigint',
'class_deg': 'smallint',
'class_size': 'smallint',
'min_quad_twist_ainvs': 'numeric[]',
'min_quad_twist_disc': 'smallint',
'faltings_index': 'smallint',
'faltings_ratio': 'smallint'

NB
(1) no 'equation' column: constructed on the fly from ainvs
(2) we store tha ainvs of the minimal quadratic twist and look up its
    label on the fly.

ec_localdata: one row per (curve, bad prime)

'label': 'text',
'lmfdb_label': 'text',
'prime': 'integer',
'tamagawa_number': 'smallint',
'kodaira_symbol': 'smallint',
'reduction_type': 'smallint',
'root_number': 'smallint',
'conductor_valuation': 'smallint',
'discriminant_valuation': 'smallint',
'j_denominator_valuation': 'smallint'

NB kodaira_symbol uses the pari numerical encoding.  Sage has (thanks
to David Roe) a suitable class to use to convert these to text via
latex(KodairaSymbol(n)), and K._pari_code() converts a Sage Kodaira
Symbol object K to its pari code.

ec_mwbsd: one row per curve

'label': 'text',
'lmfdb_label': 'text',
'torsion_generators': 'numeric[]',
'xcoord_integral_points': 'numeric[]',
'special_value': 'numeric',
'real_period': 'numeric',
'area': 'numeric',
'tamagawa_product': 'integer',
'sha_an': 'numeric',
'rank_bounds': 'smallint[]',
'ngens': 'smallint',
'gens': 'numeric[]',
'heights': 'numeric[]'

ec_classdata: one row per isogeny class

'iso': 'text',
'lmfdb_iso': 'text',
'trace_hash': 'bigint',
'class_size': 'smallint',
'class_deg': 'smallint',
'isogeny_matrix': 'smallint[]',
'aplist': 'smallint[]',
'anlist': 'smallint[]'

ec_2adic: one row per curve (Rouse data)

'label': 'text',
'lmfdb_label': 'text',
'twoadic_label': 'text',
'twoadic_index': 'smallint',
'twoadic_log_level': 'smallint',
'twoadic_gens': 'smallint[]'

ec_galrep: one row per (curve, nonmaximal prime) (Sutherland data)

'label': 'text',
'lmfdb_label': 'text',
'prime': 'smallint',
'image': 'text'

ec_torsion_growth: one row per (curve, extension field) (Gonzalez-Jimenez--Najman data)

[No data for conductors over 400000]

'label': 'text',
'lmfdb_label': 'text',
'degree': 'smallint',
'field': 'numeric[]',
'torsion': 'smallint[]'

ec_iwasawa: one row per curve (Pollack data)

'label': 'text',
'lmfdb_label': 'text',
'iwdata': 'jsonb',
'iwp0': 'smallint'

NB Type jsonb is only used for ec_iwasawa.iwdata, which is a dict with
keys a variable number of primes.

See make_tables.py for commands used to create these tables, and also
the commands for creating indexes for them.
